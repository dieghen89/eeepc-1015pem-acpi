#!/bin/bash
. /etc/conf.d/eeepc-1015pem-acpi.conf

notify() {
if [ $NOTIFY = "yes" ] ; then
  case $1 in
    touchpad) su $USER -c "$NOTIFY_PROG 'Touchpad:' '$touch_not'" ;;
    she) su $USER -c "$NOTIFY_PROG 'SHE:' '$old --> $new'" ;;
  esac
fi
}

she_toggle() {
SHE_DIR="/sys/devices/platform/eeepc/cpufv"
export DISPLAY=:0

if [ a$1 = "a" ] ; then
  case "$(cat $SHE_DIR)" in
    0x300) #Performance
      echo 2 > $SHE_DIR
      new="Performance"
      old="Normal"
      notify she
    ;;
    0x301) #Normal
      echo 0 > $SHE_DIR
      new="Normal"
      old="Powersave"
      notify she
    ;;
    0x302) #Powersave
      echo 1 > $SHE_DIR
      new="Powersave"
      old="Performance"
      notify she
    ;;
    *)
      echo 1 > $SHE_DIR
      old=""
      notify she
    ;;
  esac
else
  case $1 in
    powersave) echo 2 > $SHE_DIR ;;
    normal) echo 1 > $SHE_DIR ;;
    performance) echo 0 > $SHE_DIR ;;
  esac
fi
}


touchpad_toggle() {
TOUCH_STATUS=`synclient | grep TouchpadOff | awk '{print $3}'`

if [ $TOUCH_STATUS = 0 ] ; then
  synclient TouchpadOff=1
  touch_not="disabled"
  notify touchpad
else
  synclient TouchpadOff=0
  touch_not="enabled"
  notify touchpad
fi
}
